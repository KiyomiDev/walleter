import countriesInfo from"../static/data/countriesInfo.json"assert{type:"json"};const currenciesList=document.querySelector(".currencies__list"),confirmStepBtns=document.querySelectorAll(".confirm__step"),setupForm=document.querySelectorAll(".setup__form");let stepsCount=0,barWidth=50;const selectedCurrency=document.querySelector(".selected__currency"),cashBalance=document.querySelector(".cash__balance .input"),confirmCashBtn=document.querySelector(".setup__form .cash"),getCurrenciesInfo=e=>{countriesInfo.forEach((e=>{const t=e.countryName,n=e.currencyName,c=e.currencyCode,s=`<option value="${c}" data-country-name=${t}>${c} - ${n}</option>`;"USD"!==c&&currenciesList.insertAdjacentHTML("beforeend",s)}))};countriesInfo.forEach((e=>{const t=e.countryName,n=e.currencyName,c=e.currencyCode,s=`<option value="${c}" data-country-name=${t}>${c} - ${n}</option>`;"USD"!==c&&currenciesList.insertAdjacentHTML("beforeend",s)}));const setUserCurrency=e=>{document.querySelectorAll(".currencies__list option").forEach((t=>{t.getAttribute("data-country-name")===e&&(t.selected=!0,selectedCurrency.innerText=t.value)}))};async function getUserCountry(){let e=await fetch("https://ipapi.co/json/");const t=(await e.json()).country_name;setUserCurrency(t)}getUserCountry(),confirmStepBtns.forEach((e=>{e.addEventListener("click",(t=>{setupForm[stepsCount].checkValidity()&&t.preventDefault();const n=e.getAttribute("data-step-name");if(document.querySelector(`.${n} .input`).value){const e=document.querySelector(`.${n}`);e.classList.remove("active"),e.addEventListener("animationend",(t=>{if(e.classList.add("hide"),e.nextElementSibling){const t=e.nextElementSibling;t.classList.remove("hide"),t.classList.add("active")}}));const t=document.querySelectorAll(".setup__header .step");if(stepsCount<t.length){if(t[stepsCount].classList.contains("step__active")){t[stepsCount].classList.remove("step__active"),t[stepsCount].classList.add("step__done");if(document.querySelector(".bar__done").style.cssText=`background-color: #5ec576; width: ${barWidth}%`,t[stepsCount].nextElementSibling){t[stepsCount].nextElementSibling.classList.add("step__active")}}stepsCount++,barWidth<100&&(barWidth*=2)}}}))}));