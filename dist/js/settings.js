const userNameInput=document.querySelector(".settings__form .username__input"),userNameVal=localStorage.getItem("username"),baseCurrencySelect=document.querySelector(".base__currency-select"),baseCurrencyVal=localStorage.getItem("base__currency"),changeBtns=document.querySelectorAll(".settings__form .change"),saveChangesBtn=document.querySelector(".user__info .save"),headUserName=document.querySelector(".head .username"),cancelChangesBtn=document.querySelector(".user__info .cancel");userNameInput.value=userNameVal,fetch("../static/data/countriesInfo.json").then((e=>e.json())).then((e=>{e.forEach((e=>{const t=e.countryName,a=e.currencyName,n=e.currencyCode,r=`<option ${n===baseCurrencyVal?"selected":""} value="${n}" data-country-name=${t}>${n} - ${a}</option>`;baseCurrencySelect.insertAdjacentHTML("beforeend",r)}))})),changeBtns.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.previousElementSibling;t.classList.remove("disabled"),t.focus()}))})),saveChangesBtn.addEventListener("click",(e=>{const t=JSON.parse(localStorage.getItem("accountsObj")),a=userNameInput.value,n=baseCurrencySelect.value;if(a&&a!==userNameVal){localStorage.setItem("username",`${a}`);const e=a.split(" ")[0];headUserName.innerText=e}n!==baseCurrencyVal&&(localStorage.setItem("base__currency",`${n}`),t["account-1"].currency=n,localStorage.setItem("accountsObj",JSON.stringify(t))),e.preventDefault()})),cancelChangesBtn.addEventListener("click",(e=>{e.preventDefault(),userNameInput.value=localStorage.getItem("username");const t=localStorage.getItem("base__currency"),a=baseCurrencySelect.options;for(let e=0;e<a.length;e++){baseCurrencySelect[e].value===t&&(baseCurrencySelect[e].selected=!0)}}));